<!DOCTYPE html>
<html>
<head>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&display=swap');

        body { margin: 0; background: transparent; overflow: hidden; font-family: 'Oswald', sans-serif; }
        
        .container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 1000px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* 1. TOP BAR: Match Score */
        .match-bar {
            background: #2c3e50;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            border: 2px solid white;
        }
        .main-score { font-size: 32px; font-weight: bold; color: #f1c40f; }
        .teams { font-size: 20px; text-transform: uppercase; letter-spacing: 1px; }
        .target-box { font-size: 18px; color: #ecf0f1; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px; }

        /* 2. BOTTOM BAR: 4 Players Stats */
        .players-grid {
            display: flex;
            gap: 10px;
        }

        .player-card {
            flex: 1;
            background: rgba(255,255,255,0.95);
            padding: 8px 5px;
            border-radius: 6px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            border-bottom: 4px solid #3498db; /* Blue accent */
        }
        
        /* Highlight Top Scorer (Example Logic could go here, for now simple styling) */
        .p-name { display: block; font-size: 16px; font-weight: bold; color: #333; text-transform: uppercase; margin-bottom: 2px;}
        .p-stats { display: block; font-size: 20px; font-weight: bold; color: #2c3e50; }
        .wkt-label { color: #e74c3c; font-size: 16px; margin-left: 5px; } /* Red for wickets */

    </style>
</head>
<body>

    <div class="container" id="container" style="display:none;">
        
        <div class="match-bar">
            <div class="teams"><span id="teamBat">TEAM A</span> vs <span id="teamBowl">TEAM B</span></div>
            <div class="main-score"><span id="score">0-0</span> <span style="font-size:18px; color:white;">(<span id="overs">0.0</span>)</span></div>
            <div class="target-box" id="targetBox" style="display:none;">TARGET: <span id="target">0</span></div>
        </div>

        <div class="players-grid">
            <div class="player-card">
                <span class="p-name" id="p1Name">Player 1</span>
                <span class="p-stats"><span id="p1Runs">0</span> <span class="wkt-label" id="p1Wkts">0W</span></span>
            </div>
            <div class="player-card">
                <span class="p-name" id="p2Name">Player 2</span>
                <span class="p-stats"><span id="p2Runs">0</span> <span class="wkt-label" id="p2Wkts">0W</span></span>
            </div>
            <div class="player-card">
                <span class="p-name" id="p3Name">Player 3</span>
                <span class="p-stats"><span id="p3Runs">0</span> <span class="wkt-label" id="p3Wkts">0W</span></span>
            </div>
            <div class="player-card">
                <span class="p-name" id="p4Name">Player 4</span>
                <span class="p-stats"><span id="p4Runs">0</span> <span class="wkt-label" id="p4Wkts">0W</span></span>
            </div>
        </div>

    </div>

    <script>
        // --- YOUR KEYS ---
        const BIN_ID = '6937d64fae596e708f8d16a9'; 
        const API_KEY = '$2a$10$/hLwjwFuLAmOdHLdMG64ZeTBqP43JSwO3KQh/NZRjzu6hNtpCTAO6';
        // -----------------

        async function fetchScore() {
            try {
                const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, { headers: { 'X-Master-Key': API_KEY } });
                const json = await res.json();
                const d = json.record;

                // Show container only when data loads
                document.getElementById('container').style.display = "flex";

                // Match Stats
                setText('teamBat', d.teamBat || "TEAM A");
                setText('teamBowl', d.teamBowl || "TEAM B");
                setText('score', d.score || "0-0");
                setText('overs', d.overs || "0.0");
                
                // Target Logic
                const tgt = document.getElementById('targetBox');
                if(d.target && d.target > 0) {
                    tgt.style.display = "block";
                    setText('target', d.target);
                } else {
                    tgt.style.display = "none";
                }

                // Player Stats Logic (Name | Runs + Wickets)
                updatePlayer(1, d.p1Name, d.p1Runs, d.p1Wkts);
                updatePlayer(2, d.p2Name, d.p2Runs, d.p2Wkts);
                updatePlayer(3, d.p3Name, d.p3Runs, d.p3Wkts);
                updatePlayer(4, d.p4Name, d.p4Runs, d.p4Wkts);

            } catch (e) { console.log(e); }
        }

        function updatePlayer(num, name, runs, wkts) {
            setText(`p${num}Name`, name || `P${num}`);
            setText(`p${num}Runs`, runs || "0");
            
            // Format wickets: If 0, show "0W", if 2 show "2W"
            const wLabel = document.getElementById(`p${num}Wkts`);
            const wCount = wkts || "0";
            wLabel.innerText = wCount + "W";
            
            // If they have wickets, make it redder/bolder? (Already styled in CSS)
        }

        function setText(id, txt) {
            const el = document.getElementById(id);
            if(el) el.innerText = txt;
        }

        setInterval(fetchScore, 3000);
        fetchScore();
    </script>
</body>
</html>
